{"ast":null,"code":"var _jsxFileName = \"F:\\\\Personal Projects\\\\ReactJS+Python Soduko\\\\Main Project\\\\Sudoku-Deploy\\\\src\\\\components\\\\Game\\\\Game.js\";\nimport React, { useState, useEffect } from 'react';\nimport classes from '../../CSS/GameStyle.module.css';\nimport LogicContainers from './GridComponents/LogicContainers';\nimport GridOverlay from './GridComponents/GridOverlay';\nimport InputPad from './GridComponents/Input';\nimport padContext from '../Context/Pad-context';\nimport Solve from '../Buttons/Solve';\nimport Finish from '../Buttons/Finish';\nimport puzzleData from '../../Assets/data.json'; // import fire from '../Login/fire';\n\nimport { useHistory } from 'react-router-dom';\nimport { submitScore, Verify } from '../utils/requests';\nimport { getFromStorage } from '../utils/localstorage';\n\nconst Game = props => {\n  const [inputPadState, setInputPadState] = useState({\n    showPad: false,\n    Xcoords: null,\n    Ycoords: null,\n    cellindex: null\n  });\n  const [ActivePuzzle, SetPuzzle] = useState({\n    R1: [null, null, null, null, null, null, null, null, null],\n    R2: [null, null, null, null, null, null, null, null, null],\n    R3: [null, null, null, null, null, null, null, null, null],\n    R4: [null, null, null, null, null, null, null, null, null],\n    R5: [null, null, null, null, null, null, null, null, null],\n    R6: [null, null, null, null, null, null, null, null, null],\n    R7: [null, null, null, null, null, null, null, null, null],\n    R8: [null, null, null, null, null, null, null, null, null],\n    R9: [null, null, null, null, null, null, null, null, null]\n  });\n  const [puzzCompState, setPuzzComp] = useState({\n    complete: 0\n  });\n  const [triggerCheck, setTrigger] = useState({\n    trigger: false,\n    state: false\n  });\n  const [puzzleCorrect, setPuzzleCorrect] = useState(false);\n  const [puzzleID, setPuzzleID] = useState('');\n\n  const puzzleFinish = () => {\n    let temp = 0;\n    Object.keys(ActivePuzzle).map((Sector, key) => {\n      for (let i = 0; i < ActivePuzzle[Sector].length; i++) {\n        let row = ActivePuzzle[Sector][i];\n\n        if (row !== 0 && row !== null) {\n          temp++;\n        }\n      }\n    });\n    setPuzzComp({\n      complete: temp\n    });\n    let temp2 = triggerCheck.trigger;\n    setTrigger({\n      trigger: !temp2,\n      state: true\n    });\n  };\n\n  const PadHandler = (event, stat, Sector, index) => {\n    if (inputPadState.showPad || stat == \"static\") {\n      setInputPadState({\n        showPad: false\n      });\n    } else {\n      setInputPadState({\n        showPad: true,\n        Xcoords: event.clientX,\n        Ycoords: event.clientY,\n        cellindex: index,\n        Sector: Sector\n      });\n    }\n  };\n\n  const InputHandler = padinput => {\n    let Tempstate = ActivePuzzle;\n    Tempstate[inputPadState.Sector][inputPadState.cellindex] = padinput.toString();\n    SetPuzzle(Tempstate);\n    setInputPadState({\n      showPad: false\n    });\n  };\n\n  let history = useHistory();\n\n  const endPuzzle = () => {\n    setPuzzleCorrect(true);\n    props.gameHandler(); // \n  };\n\n  let inputmenu = null;\n\n  if (inputPadState.showPad) {\n    inputmenu = /*#__PURE__*/React.createElement(InputPad, {\n      InputHandler: InputHandler,\n      Ycoords: inputPadState.Ycoords,\n      Xcoords: inputPadState.Xcoords,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    });\n  }\n\n  const togglePad = () => {\n    if (inputPadState.showPad) {\n      setInputPadState({\n        showPad: false\n      });\n    }\n  };\n\n  let GameComponents = /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, Object.keys(ActivePuzzle).map((Sector, key) => {\n    return /*#__PURE__*/React.createElement(LogicContainers, Object.assign({\n      start: props.gameState\n    }, inputPadState, {\n      PadHandler: PadHandler,\n      Data: ActivePuzzle[Sector],\n      Sector: Sector,\n      key: key,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }));\n  }));\n\n  const PuzzleLoader = () => {\n    let tempcounter = 0;\n    let RawPuzzle = null;\n    let i = Math.floor(Math.random() * 500 + 1);\n    RawPuzzle = \"864371259325849761971265843436192587198657432257483916689734125713528694542916378\"; //puzzleData[i][\"puzzle\"].toString()\n\n    setPuzzleID(RawPuzzle.substring(0, 6));\n    let PuzzProcess = RawPuzzle.split(\"\");\n    let ReadyPuzz = {\n      R1: [],\n      R2: [],\n      R3: [],\n      R4: [],\n      R5: [],\n      R6: [],\n      R7: [],\n      R8: [],\n      R9: []\n    };\n\n    for (let n = 1; n < 10; n++) {\n      for (let i = 0; i < 9; i++) {\n        ReadyPuzz[\"R\" + n].push(parseInt(PuzzProcess[tempcounter]));\n        tempcounter++;\n      }\n    }\n\n    SetPuzzle(ReadyPuzz);\n  };\n\n  useEffect(() => {\n    if (props.gameState) {\n      PuzzleLoader();\n    }\n  }, [props.gameState]);\n  useEffect(() => {\n    if (puzzleCorrect) {\n      Verify(getFromStorage('sudoku_react').token).then(res => {\n        if (res.data.success) {\n          submitScore({\n            userId: res.data.userId,\n            score: 1000 / props.score\n          });\n        }\n      });\n    } //         fire.auth().onAuthStateChanged(user => {\n    //             if(user != null){\n    //                 return fire.firestore().collection('users-history').doc(user.email)\n    //             .get()\n    //             .then((doc)=>{\n    //                 fire.firestore().collection('users-history').doc(user.email)\n    //                 .update({\n    //                     [puzzleID]:parseInt(1000 / props.score),\n    //                     highScore:doc.data().highScore+parseInt(1000 / props.score)\n    //             })\n    //         }).then(()=>{\n    //             history.push(\"/Complete\")\n    //         })\n    //     }\n    // else{\n    //     history.push(\"/Complete\")\n    // }})\n\n  }, [props.score]);\n  let StartFin = /*#__PURE__*/React.createElement(Solve, {\n    onClick: props.gameHandler,\n    gameState: props.gameState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 20\n    }\n  });\n\n  if (props.gameState) {\n    StartFin = /*#__PURE__*/React.createElement(Finish, {\n      onClick: puzzleFinish,\n      endPuzzle: endPuzzle,\n      triggstate: triggerCheck.state,\n      trigger: triggerCheck.trigger,\n      puzzleComplete: puzzCompState.complete,\n      Puzzle: ActivePuzzle,\n      score: props.score,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.gamePage,\n    onClick: togglePad,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.GameStyleContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(padContext.Provider, {\n    value: {\n      showPad: inputPadState.showPad,\n      PadHandler: PadHandler\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.GameContainer,\n    content: \"width=device-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(GridOverlay, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }), GameComponents))), inputmenu, StartFin);\n};\n\nexport default Game;","map":{"version":3,"sources":["F:/Personal Projects/ReactJS+Python Soduko/Main Project/Sudoku-Deploy/src/components/Game/Game.js"],"names":["React","useState","useEffect","classes","LogicContainers","GridOverlay","InputPad","padContext","Solve","Finish","puzzleData","useHistory","submitScore","Verify","getFromStorage","Game","props","inputPadState","setInputPadState","showPad","Xcoords","Ycoords","cellindex","ActivePuzzle","SetPuzzle","R1","R2","R3","R4","R5","R6","R7","R8","R9","puzzCompState","setPuzzComp","complete","triggerCheck","setTrigger","trigger","state","puzzleCorrect","setPuzzleCorrect","puzzleID","setPuzzleID","puzzleFinish","temp","Object","keys","map","Sector","key","i","length","row","temp2","PadHandler","event","stat","index","clientX","clientY","InputHandler","padinput","Tempstate","toString","history","endPuzzle","gameHandler","inputmenu","togglePad","GameComponents","gameState","PuzzleLoader","tempcounter","RawPuzzle","Math","floor","random","substring","PuzzProcess","split","ReadyPuzz","n","push","parseInt","token","then","res","data","success","userId","score","StartFin","gamePage","GameStyleContainer","GameContainer"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport classes from '../../CSS/GameStyle.module.css';\r\nimport LogicContainers from './GridComponents/LogicContainers';\r\nimport GridOverlay  from './GridComponents/GridOverlay';\r\nimport InputPad from './GridComponents/Input';\r\nimport padContext from '../Context/Pad-context';\r\nimport Solve from '../Buttons/Solve';\r\nimport Finish from'../Buttons/Finish';\r\nimport puzzleData from '../../Assets/data.json';\r\n// import fire from '../Login/fire';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { submitScore , Verify } from '../utils/requests';\r\nimport { getFromStorage} from '../utils/localstorage';\r\n\r\nconst Game = (props) =>{\r\n    const [inputPadState,setInputPadState] = useState({\r\n        showPad:false,\r\n        Xcoords: null,\r\n        Ycoords:null,\r\n        cellindex: null\r\n    })\r\n    const  [ActivePuzzle,SetPuzzle] = useState({\r\n        R1:[null,null,null,null,null,null,null,null,null],\r\n        R2:[null,null,null,null,null,null,null,null,null],\r\n        R3:[null,null,null,null,null,null,null,null,null],\r\n        R4:[null,null,null,null,null,null,null,null,null],\r\n        R5:[null,null,null,null,null,null,null,null,null],\r\n        R6:[null,null,null,null,null,null,null,null,null],\r\n        R7:[null,null,null,null,null,null,null,null,null],\r\n        R8:[null,null,null,null,null,null,null,null,null],\r\n        R9:[null,null,null,null,null,null,null,null,null]});\r\n    const [puzzCompState,setPuzzComp] = useState({complete:0});\r\n    const [triggerCheck,setTrigger] = useState({trigger:false,state:false});\r\n    const [puzzleCorrect,setPuzzleCorrect] = useState(false);\r\n    const [puzzleID,setPuzzleID] = useState('');\r\n    const puzzleFinish =()=>{\r\n        let temp = 0\r\n        Object.keys(ActivePuzzle).map((Sector,key)=>{\r\n            for(let i = 0;i<ActivePuzzle[Sector].length;i++){\r\n                let row = ActivePuzzle[Sector][i]\r\n                if(row !== 0 && row !== null){\r\n                    temp++\r\n                    \r\n                }\r\n            }\r\n        })\r\n        setPuzzComp({complete:temp})\r\n        let temp2 = triggerCheck.trigger\r\n        setTrigger({trigger:!temp2,\r\n            state:true\r\n        })\r\n    }  \r\n    const PadHandler =(event, stat, Sector,index)=>{\r\n        if(inputPadState.showPad||stat==\"static\"){\r\n            setInputPadState({\r\n                showPad:false\r\n            });\r\n        }\r\n        else{    \r\n            setInputPadState({\r\n                showPad:true,\r\n                Xcoords: event.clientX,\r\n                Ycoords: event.clientY,\r\n                cellindex: index,\r\n                Sector: Sector\r\n            })\r\n        }\r\n    }\r\n    const InputHandler=(padinput)=>{\r\n        let Tempstate = ActivePuzzle\r\n        Tempstate[inputPadState.Sector][inputPadState.cellindex]= padinput.toString()\r\n\r\n        SetPuzzle(Tempstate)\r\n        setInputPadState({\r\n            showPad:false\r\n        })\r\n \r\n    }\r\n    let history = useHistory();\r\n    const endPuzzle=()=>{\r\n        setPuzzleCorrect(true)\r\n        props.gameHandler()\r\n        // \r\n       \r\n    }\r\n    let inputmenu = null;\r\n    if(inputPadState.showPad){\r\n        inputmenu = (\r\n        <InputPad InputHandler={InputHandler}Ycoords={inputPadState.Ycoords} Xcoords={inputPadState.Xcoords}/>\r\n        );\r\n    }\r\n    const togglePad=()=>{\r\n        if(inputPadState.showPad){\r\n            setInputPadState({showPad:false})\r\n    }\r\n    }\r\n    \r\n    \r\n    \r\n    let   GameComponents = (\r\n        <div >\r\n            {Object.keys(ActivePuzzle).map((Sector,key)=>{\r\n                return(\r\n                    <LogicContainers start={props.gameState} {...inputPadState} PadHandler={PadHandler}Data={ActivePuzzle[Sector]} Sector={Sector}key={key}/>\r\n                )\r\n            })}\r\n\r\n        </div>\r\n    )\r\n    const PuzzleLoader = ()=>{\r\n        let tempcounter = 0\r\n        let RawPuzzle  = null;\r\n        let i = Math.floor((Math.random() * 500) + 1)\r\n        RawPuzzle = \"864371259325849761971265843436192587198657432257483916689734125713528694542916378\" //puzzleData[i][\"puzzle\"].toString()\r\n        setPuzzleID(RawPuzzle.substring(0,6))\r\n        let PuzzProcess = RawPuzzle.split(\"\")\r\n        let ReadyPuzz ={\r\n            R1:[],\r\n            R2:[],\r\n            R3:[],\r\n            R4:[],\r\n            R5:[],\r\n            R6:[],\r\n            R7:[],\r\n            R8:[],\r\n            R9:[]}  \r\n        for(let n = 1; n <10;n++){    \r\n            for(let i =0;i<9;i++){\r\n                ReadyPuzz[\"R\"+n].push(parseInt(PuzzProcess[tempcounter]))\r\n                tempcounter++ \r\n              }           \r\n          }\r\n        SetPuzzle(ReadyPuzz)\r\n    }\r\n    useEffect(()=>{\r\n        if(props.gameState){\r\n        PuzzleLoader()\r\n    }\r\n    \r\n    },[props.gameState])\r\n    useEffect(()=>{\r\n        if(puzzleCorrect){\r\n            Verify(getFromStorage('sudoku_react').token)\r\n            .then(res =>{\r\n                if(res.data.success) {\r\n                    submitScore({userId: res.data.userId, score:(1000 / props.score)})\r\n                }\r\n            })\r\n            \r\n        }\r\n    //         fire.auth().onAuthStateChanged(user => {\r\n    //             if(user != null){\r\n    //                 return fire.firestore().collection('users-history').doc(user.email)\r\n                \r\n    //             .get()\r\n    //             .then((doc)=>{\r\n    //                 fire.firestore().collection('users-history').doc(user.email)\r\n    //                 .update({\r\n    //                     [puzzleID]:parseInt(1000 / props.score),\r\n    //                     highScore:doc.data().highScore+parseInt(1000 / props.score)\r\n                        \r\n    //             })\r\n    //         }).then(()=>{\r\n    //             history.push(\"/Complete\")\r\n    //         })\r\n    //     }\r\n    // else{\r\n    //     history.push(\"/Complete\")\r\n    // }})\r\n    \r\n    },[props.score])\r\n    let StartFin = <Solve onClick={props.gameHandler} gameState={props.gameState}></Solve>\r\n    if(props.gameState){\r\n      StartFin= <Finish \r\n        onClick={puzzleFinish}\r\n        endPuzzle={endPuzzle}\r\n        triggstate={triggerCheck.state}\r\n        trigger={triggerCheck.trigger}\r\n        puzzleComplete={puzzCompState.complete}\r\n        Puzzle={ActivePuzzle}\r\n        score={props.score}/>\r\n    }\r\n    return(\r\n        <div className={classes.gamePage} onClick={togglePad}>\r\n            \r\n            <div className={classes.GameStyleContainer} >\r\n                \r\n                <padContext.Provider value={{showPad: inputPadState.showPad, PadHandler:PadHandler}}>\r\n                <div className={classes.GameContainer} content=\"width=device-width\">\r\n                    <GridOverlay/>\r\n                    {GameComponents}\r\n                </div>\r\n                </padContext.Provider>\r\n            </div>\r\n            {inputmenu}\r\n            {StartFin}\r\n        </div>\r\n    )\r\n};\r\nexport default Game;"]},"metadata":{},"sourceType":"module"}