{"ast":null,"code":"var _jsxFileName = \"F:\\\\Personal Projects\\\\ReactJS+Python Soduko\\\\Main Project\\\\Sudoku-Deploy\\\\src\\\\components\\\\Login\\\\LoginHandlingMongo.js\";\nimport React, { useState, useEffect } from 'react';\nimport LoginWindow from './LoginWindow';\nimport { Redirect, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { getFromStorage, setInStorage } from '../utils/localstorage';\nimport { Verify, Signup, Login, Logout } from '../utils/requests';\n\nconst LoginHandlingMongo = () => {\n  const [user, setUser] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordConf, setPasswordConf] = useState('');\n  const [passwordConfError, setPasswordConfError] = useState('');\n  const [receiveError, setReceiveError] = useState('');\n  let history = useHistory();\n  let userJSON = {\n    username: username,\n    password: password\n  };\n\n  const clearInputs = () => {\n    setUsername('');\n    setPassword('');\n  };\n\n  const clearErrors = () => {\n    setReceiveError('');\n  };\n\n  const loginHandler = () => {\n    clearErrors('');\n    Login(userJSON).then(res => {\n      if (res.data.success) {\n        setInStorage('sudoku_react', {\n          token: res.data.token\n        });\n        setUser(res.data.token);\n      } else {\n        setReceiveError(res.data.message);\n      }\n    });\n  };\n\n  const signupHandler = () => {\n    clearErrors();\n\n    if (password == passwordConf) {\n      Signup(userJSON).then(res => {\n        console.log(\"test\");\n\n        if (res.data.success) {\n          console.log(\"test\");\n          Login(userJSON).then(res => {\n            if (res.data.success) {\n              setInStorage('sudoku_react', {\n                token: res.data.token\n              });\n            }\n          });\n        } else {\n          setReceiveError(res.data.message);\n        }\n      });\n    } else {\n      setPasswordConfError('Please make sure both passwords match');\n    }\n  };\n\n  const logOutHandler = () => {\n    Logout(user).then(res => {\n      if (res.data.success) {\n        setUser('');\n      }\n    });\n  };\n\n  const authListener = () => {};\n\n  const tokenVerify = () => {\n    const obj = getFromStorage('sudoku_react');\n\n    if (obj && obj.token) {\n      const {\n        token\n      } = obj;\n      Verify(token).then(res => {\n        if (res.data.success) {\n          setUser(token);\n        } else {\n          setUser('');\n        }\n      });\n    }\n  };\n\n  useEffect(() => {\n    tokenVerify();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, user ? history.push('/Home') : /*#__PURE__*/React.createElement(LoginWindow, {\n    username: username,\n    setUsername: setUsername,\n    password: password,\n    setPassword: setPassword,\n    setPasswordConf: setPasswordConf,\n    loginHandler: loginHandler,\n    signupHandler: signupHandler,\n    receiveError: receiveError,\n    passwordConfError: passwordConfError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }));\n};\n\nexport default LoginHandlingMongo;","map":{"version":3,"sources":["F:/Personal Projects/ReactJS+Python Soduko/Main Project/Sudoku-Deploy/src/components/Login/LoginHandlingMongo.js"],"names":["React","useState","useEffect","LoginWindow","Redirect","useHistory","axios","getFromStorage","setInStorage","Verify","Signup","Login","Logout","LoginHandlingMongo","user","setUser","username","setUsername","password","setPassword","passwordConf","setPasswordConf","passwordConfError","setPasswordConfError","receiveError","setReceiveError","history","userJSON","clearInputs","clearErrors","loginHandler","then","res","data","success","token","message","signupHandler","console","log","logOutHandler","authListener","tokenVerify","obj","push"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,kBAArC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,EAAyBC,YAAzB,QAA6C,uBAA7C;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,KAAzB,EAAgCC,MAAhC,QAA8C,mBAA9C;;AACA,MAAMC,kBAAkB,GAAG,MAAM;AAC7B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBd,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACe,QAAD,EAAWC,WAAX,IAA0BhB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACiB,QAAD,EAAWC,WAAX,IAA0BlB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACmB,YAAD,EAAeC,eAAf,IAAkCpB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACqB,iBAAD,EAAoBC,oBAApB,IAA4CtB,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAACuB,YAAD,EAAeC,eAAf,IAAkCxB,QAAQ,CAAC,EAAD,CAAhD;AACA,MAAIyB,OAAO,GAAGrB,UAAU,EAAxB;AACA,MAAIsB,QAAQ,GAAG;AACXX,IAAAA,QAAQ,EAAEA,QADC;AAEXE,IAAAA,QAAQ,EAAEA;AAFC,GAAf;;AAKA,QAAMU,WAAW,GAAG,MAAM;AACtBX,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAE,IAAAA,WAAW,CAAC,EAAD,CAAX;AACH,GAHD;;AAIA,QAAMU,WAAW,GAAG,MAAM;AACtBJ,IAAAA,eAAe,CAAC,EAAD,CAAf;AACH,GAFD;;AAGA,QAAMK,YAAY,GAAG,MAAM;AACvBD,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAlB,IAAAA,KAAK,CAACgB,QAAD,CAAL,CACCI,IADD,CACMC,GAAG,IAAI;AACT,UAAGA,GAAG,CAACC,IAAJ,CAASC,OAAZ,EAAqB;AACjB1B,QAAAA,YAAY,CAAC,cAAD,EAAgB;AAAE2B,UAAAA,KAAK,EAAEH,GAAG,CAACC,IAAJ,CAASE;AAAlB,SAAhB,CAAZ;AACApB,QAAAA,OAAO,CAACiB,GAAG,CAACC,IAAJ,CAASE,KAAV,CAAP;AACH,OAHD,MAGO;AACHV,QAAAA,eAAe,CAACO,GAAG,CAACC,IAAJ,CAASG,OAAV,CAAf;AACH;AACJ,KARD;AAUH,GAZD;;AAcA,QAAMC,aAAa,GAAG,MAAM;AACxBR,IAAAA,WAAW;;AACX,QAAGX,QAAQ,IAAIE,YAAf,EAA4B;AACxBV,MAAAA,MAAM,CAACiB,QAAD,CAAN,CACCI,IADD,CACOC,GAAG,IAAI;AACVM,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AAEA,YAAIP,GAAG,CAACC,IAAJ,CAASC,OAAb,EAAsB;AAClBI,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA5B,UAAAA,KAAK,CAACgB,QAAD,CAAL,CACCI,IADD,CACMC,GAAG,IAAI;AACT,gBAAGA,GAAG,CAACC,IAAJ,CAASC,OAAZ,EAAqB;AACjB1B,cAAAA,YAAY,CAAC,cAAD,EAAgB;AAAE2B,gBAAAA,KAAK,EAAEH,GAAG,CAACC,IAAJ,CAASE;AAAlB,eAAhB,CAAZ;AACH;AACJ,WALD;AAMH,SARD,MAQO;AACHV,UAAAA,eAAe,CAACO,GAAG,CAACC,IAAJ,CAASG,OAAV,CAAf;AACH;AACJ,OAfD;AAgBC,KAjBL,MAiBW;AACHb,MAAAA,oBAAoB,CAAC,uCAAD,CAApB;AACH;AAER,GAvBD;;AAwBA,QAAMiB,aAAa,GAAG,MAAM;AACxB5B,IAAAA,MAAM,CAACE,IAAD,CAAN,CACCiB,IADD,CACMC,GAAG,IAAG;AACR,UAAGA,GAAG,CAACC,IAAJ,CAASC,OAAZ,EAAoB;AAChBnB,QAAAA,OAAO,CAAC,EAAD,CAAP;AACH;AACJ,KALD;AAMH,GAPD;;AAQA,QAAM0B,YAAY,GAAG,MAAM,CAE1B,CAFD;;AAGA,QAAMC,WAAW,GAAE,MAAM;AACrB,UAAMC,GAAG,GAAGpC,cAAc,CAAC,cAAD,CAA1B;;AACA,QAAIoC,GAAG,IAAIA,GAAG,CAACR,KAAf,EAAsB;AAClB,YAAM;AAAEA,QAAAA;AAAF,UAAYQ,GAAlB;AACAlC,MAAAA,MAAM,CAAC0B,KAAD,CAAN,CACCJ,IADD,CACMC,GAAG,IAAG;AACR,YAAGA,GAAG,CAACC,IAAJ,CAASC,OAAZ,EAAqB;AACjBnB,UAAAA,OAAO,CAACoB,KAAD,CAAP;AACH,SAFD,MAEO;AACHpB,UAAAA,OAAO,CAAC,EAAD,CAAP;AACH;AACJ,OAPD;AAQH;AACJ,GAbD;;AAcAb,EAAAA,SAAS,CAAC,MAAM;AACZwC,IAAAA,WAAW;AACd,GAFQ,EAEN,EAFM,CAAT;AAGA,sBACI,0CACK5B,IAAI,GAAIY,OAAO,CAACkB,IAAR,CAAa,OAAb,CAAJ,gBAED,oBAAC,WAAD;AACI,IAAA,QAAQ,EAAE5B,QADd;AAEI,IAAA,WAAW,EAAEC,WAFjB;AAGI,IAAA,QAAQ,EAAEC,QAHd;AAII,IAAA,WAAW,EAAEC,WAJjB;AAKI,IAAA,eAAe,EAAEE,eALrB;AAMI,IAAA,YAAY,EAAES,YANlB;AAOI,IAAA,aAAa,EAAEO,aAPnB;AAQI,IAAA,YAAY,EAAEb,YARlB;AASI,IAAA,iBAAiB,EAAEF,iBATvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHR,CADJ;AAkBH,CAxGD;;AAyGA,eAAeT,kBAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport LoginWindow from './LoginWindow';\r\nimport { Redirect, useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { getFromStorage, setInStorage } from '../utils/localstorage';\r\nimport { Verify, Signup, Login, Logout } from '../utils/requests';\r\nconst LoginHandlingMongo = () => {\r\n    const [user, setUser] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [passwordConf, setPasswordConf] = useState('');\r\n    const [passwordConfError, setPasswordConfError] = useState('');\r\n    const [receiveError, setReceiveError] = useState('');\r\n    let history = useHistory();\r\n    let userJSON = {\r\n        username: username,\r\n        password: password\r\n    }\r\n\r\n    const clearInputs = () => {\r\n        setUsername('');\r\n        setPassword('');\r\n    }\r\n    const clearErrors = () => {\r\n        setReceiveError('');\r\n    }\r\n    const loginHandler = () => {\r\n        clearErrors('');\r\n        Login(userJSON)\r\n        .then(res => {\r\n            if(res.data.success) {\r\n                setInStorage('sudoku_react',{ token: res.data.token })\r\n                setUser(res.data.token)\r\n            } else {\r\n                setReceiveError(res.data.message)\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    const signupHandler = () => {\r\n        clearErrors();\r\n        if(password == passwordConf){\r\n            Signup(userJSON)\r\n            .then( res => { \r\n                console.log(\"test\")\r\n\r\n                if (res.data.success) {\r\n                    console.log(\"test\")\r\n                    Login(userJSON)\r\n                    .then(res => {\r\n                        if(res.data.success) {\r\n                            setInStorage('sudoku_react',{ token: res.data.token })\r\n                        }\r\n                    })\r\n                } else {\r\n                    setReceiveError(res.data.message)\r\n                }\r\n            });\r\n            } else {\r\n                setPasswordConfError('Please make sure both passwords match')\r\n            }\r\n        \r\n    }\r\n    const logOutHandler = () => {\r\n        Logout(user)\r\n        .then(res =>{\r\n            if(res.data.success){\r\n                setUser('')\r\n            }\r\n        })\r\n    }\r\n    const authListener = () => {\r\n        \r\n    }\r\n    const tokenVerify =() => {\r\n        const obj = getFromStorage('sudoku_react');\r\n        if (obj && obj.token) {\r\n            const { token } = obj;\r\n            Verify(token)\r\n            .then(res =>{\r\n                if(res.data.success) {\r\n                    setUser(token)\r\n                } else {\r\n                    setUser('')\r\n                }\r\n            });\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        tokenVerify()\r\n    }, [])\r\n    return (\r\n        <>\r\n            {user ?( history.push('/Home')\r\n                ):(\r\n                <LoginWindow\r\n                    username={username}\r\n                    setUsername={setUsername}\r\n                    password={password}\r\n                    setPassword={setPassword}\r\n                    setPasswordConf={setPasswordConf}\r\n                    loginHandler={loginHandler}\r\n                    signupHandler={signupHandler}\r\n                    receiveError={receiveError}\r\n                    passwordConfError={passwordConfError}\r\n                />)\r\n            }\r\n        </>\r\n    )\r\n}\r\nexport default LoginHandlingMongo"]},"metadata":{},"sourceType":"module"}