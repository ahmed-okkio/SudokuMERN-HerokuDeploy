{"ast":null,"code":"import _slicedToArray from\"F:\\\\Personal Projects\\\\ReactJS+Python Soduko\\\\Main Project\\\\React+Python Project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import fire from'./fire';import LoginWindow from'./LoginWindow';import{Redirect}from'react-router-dom';var LoginHandling=function LoginHandling(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),passwordConf=_useState8[0],setPasswordConf=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),passwordConfError=_useState10[0],setPasswordConfError=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),userNameError=_useState12[0],setuserNameError=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),passwordError=_useState14[0],setPasswordError=_useState14[1];var clearInputs=function clearInputs(){setUsername('');setPassword('');};var clearErrors=function clearErrors(){setuserNameError('');setPasswordError('');};var loginHandler=function loginHandler(){clearErrors('');fire.auth().signInWithEmailAndPassword(username+\"@sudokureact.com\",password).catch(function(err){switch(err.code){case\"auth/invalid\":case\"auth/user-disabled\":case\"auth/user-not-found\":setuserNameError(err.message);break;case\"auth/wrong-password\":setPasswordError(err.message);break;}});};var signupHandler=function signupHandler(){clearErrors();if(password==passwordConf){fire.auth().createUserWithEmailAndPassword(username+\"@sudokureact.com\",password).then(function(cred){return fire.firestore().collection('users-history').doc(username).set({highScore:0});},function(err){switch(err.code){case\"auth/email-already-in-use\":case\"auth/invalid-user\":setuserNameError(err.message);console.log(userNameError);break;case\"auth/weak-password\":setPasswordError(err.message);break;}});}else{setPasswordConfError('Please make sure both passwords match');}};var logOutHandler=function logOutHandler(){fire.auth().signOut();};var authListener=function authListener(){fire.auth().onAuthStateChanged(function(user){if(user){clearInputs();setUser(user);}else{setUser('');}});};useEffect(function(){authListener();},[]);return/*#__PURE__*/React.createElement(\"div\",null,user?/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}):/*#__PURE__*/React.createElement(LoginWindow,{username:username,setUsername:setUsername,password:password,setPassword:setPassword,setPasswordConf:setPasswordConf,loginHandler:loginHandler,signupHandler:signupHandler,userNameError:userNameError,passwordError:passwordError,passwordConfError:passwordConfError}));};export default LoginHandling;","map":{"version":3,"sources":["F:/Personal Projects/ReactJS+Python Soduko/Main Project/React+Python Project/src/components/Login/LoginHandling.js"],"names":["React","useState","useEffect","fire","LoginWindow","Redirect","LoginHandling","user","setUser","username","setUsername","password","setPassword","passwordConf","setPasswordConf","passwordConfError","setPasswordConfError","userNameError","setuserNameError","passwordError","setPasswordError","clearInputs","clearErrors","loginHandler","auth","signInWithEmailAndPassword","catch","err","code","message","signupHandler","createUserWithEmailAndPassword","then","cred","firestore","collection","doc","set","highScore","console","log","logOutHandler","signOut","authListener","onAuthStateChanged"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport fire from './fire';\r\nimport LoginWindow from './LoginWindow';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nconst LoginHandling = () => {\r\n    const [user, setUser] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [passwordConf, setPasswordConf] = useState('');\r\n    const [passwordConfError, setPasswordConfError] = useState('');\r\n    const [userNameError, setuserNameError] = useState('');\r\n    const [passwordError, setPasswordError] = useState('');\r\n    const clearInputs = () => {\r\n        setUsername('');\r\n        setPassword('');\r\n    }\r\n    const clearErrors = () => {\r\n        setuserNameError('');\r\n        setPasswordError('');\r\n    }\r\n    const loginHandler = () => {\r\n        clearErrors('');\r\n        fire\r\n            .auth()\r\n            .signInWithEmailAndPassword(username+\"@sudokureact.com\", password)\r\n            .catch(err => {\r\n                switch (err.code) {\r\n                        case \"auth/invalid\":\r\n                        case \"auth/user-disabled\":\r\n                        case \"auth/user-not-found\":\r\n                        setuserNameError(err.message);\r\n                        break;\r\n                    case \"auth/wrong-password\":\r\n                        setPasswordError(err.message);\r\n                        break;\r\n                }\r\n            })\r\n    }\r\n\r\n    const signupHandler = () => {\r\n        clearErrors();\r\n        if(password == passwordConf){\r\n            fire\r\n                .auth()\r\n                .createUserWithEmailAndPassword(username+\"@sudokureact.com\", password)\r\n                .then(cred => {\r\n                    return fire.firestore().collection('users-history').doc(username).set({highScore:0})\r\n                },err=>{\r\n                    switch (err.code) {\r\n                        case \"auth/email-already-in-use\":\r\n                        case \"auth/invalid-user\":\r\n                            setuserNameError(err.message);\r\n                            console.log(userNameError)\r\n                            break;\r\n                        case \"auth/weak-password\":\r\n                            setPasswordError(err.message);\r\n                            break;                       \r\n                    }\r\n                })\r\n            }\r\n        else{\r\n            setPasswordConfError('Please make sure both passwords match')\r\n        }\r\n    }\r\n    const logOutHandler = () => {\r\n        fire.auth().signOut();\r\n    }\r\n    const authListener = () => {\r\n        fire.auth().onAuthStateChanged(user => {\r\n            if (user) {\r\n                clearInputs();\r\n                setUser(user);\r\n            }\r\n            else {\r\n                setUser('');\r\n            }\r\n        })\r\n    }\r\n    useEffect(() => {\r\n        authListener();\r\n    }, [])\r\n    return (\r\n        <div>\r\n            {user ?(\r\n                <Redirect to=\"/\"/>\r\n                ):(\r\n                <LoginWindow\r\n                    username={username}\r\n                    setUsername={setUsername}\r\n                    password={password}\r\n                    setPassword={setPassword}\r\n                    setPasswordConf={setPasswordConf}\r\n                    loginHandler={loginHandler}\r\n                    signupHandler={signupHandler}\r\n                    userNameError={userNameError}\r\n                    passwordError={passwordError}\r\n                    passwordConfError={passwordConfError}\r\n                />)\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport default LoginHandling"]},"metadata":{},"sourceType":"module"}